<view class="history-page data-v-b2d018fa"><view class="header data-v-b2d018fa"><text class="title data-v-b2d018fa">📚 历史记录</text></view><view class="search-card card data-v-b2d018fa"><view class="search-box data-v-b2d018fa"><input class="search-input data-v-b2d018fa" placeholder="搜索历史记录..." bindconfirm="{{a}}" value="{{b}}" bindinput="{{c}}"/><button class="btn btn-primary btn-small data-v-b2d018fa" bindtap="{{d}}">🔍 搜索</button></view><view wx:if="{{e}}" class="search-tip data-v-b2d018fa"><text class="data-v-b2d018fa">搜索关键词: {{f}}</text><text class="cancel-search data-v-b2d018fa" bindtap="{{g}}">取消搜索</text></view></view><view class="history-list data-v-b2d018fa"><view wx:if="{{h}}" class="loading data-v-b2d018fa"><text class="data-v-b2d018fa">加载中...</text></view><view wx:elif="{{i}}" class="empty data-v-b2d018fa"><text class="data-v-b2d018fa">暂无历史记录</text></view><view wx:else class="data-v-b2d018fa"><view wx:for="{{j}}" wx:for-item="item" wx:key="k" class="history-item card data-v-b2d018fa"><view class="item-header data-v-b2d018fa"><text class="session-tag data-v-b2d018fa">会话: {{item.a}}...</text><view class="header-right data-v-b2d018fa"><text class="time-text data-v-b2d018fa">{{item.b}}</text><button class="btn-delete data-v-b2d018fa" bindtap="{{item.c}}">🗑️ 删除</button></view></view><view class="item-content data-v-b2d018fa"><view class="message-section data-v-b2d018fa"><text class="label data-v-b2d018fa">用户消息：</text><text class="message-text data-v-b2d018fa">{{item.d}}</text></view><view class="response-section data-v-b2d018fa"><text class="label data-v-b2d018fa">助手回复：</text><view class="response-container data-v-b2d018fa"><text class="{{['response-text', 'data-v-b2d018fa', item.f && 'expanded']}}">{{item.e}}</text><view class="action-buttons data-v-b2d018fa"><text class="action-btn copy-btn data-v-b2d018fa" bindtap="{{item.g}}"> 复制 </text><text wx:if="{{item.h}}" class="action-btn expand-btn data-v-b2d018fa" bindtap="{{item.j}}">{{item.i}}</text></view></view></view></view></view></view></view><view wx:if="{{k}}" class="pagination data-v-b2d018fa"><button class="btn btn-outline btn-small data-v-b2d018fa" disabled="{{l}}" bindtap="{{m}}">上一页</button><text class="page-info data-v-b2d018fa">第 {{n}} / {{o}} 页 (共 {{p}} 条)</text><button class="btn btn-outline btn-small data-v-b2d018fa" disabled="{{q}}" bindtap="{{r}}">下一页</button></view></view>