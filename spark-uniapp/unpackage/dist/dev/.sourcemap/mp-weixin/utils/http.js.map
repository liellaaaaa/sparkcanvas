{"version":3,"file":"http.js","sources":["utils/http.js"],"sourcesContent":["/**\r\n * HTTP请求封装\r\n * 统一处理API请求、错误处理、Token管理等\r\n */\r\nimport config from './config.js'\r\n\r\nconst BASE_URL = config.BASE_URL\r\n\r\n// 请求拦截器\r\nconst requestInterceptor = (options) => {\r\n  // 添加Token\r\n  const token = uni.getStorageSync(config.TOKEN_KEY)\r\n  if (token) {\r\n    options.header = {\r\n      ...options.header,\r\n      'Authorization': `Bearer ${token}`\r\n    }\r\n  }\r\n  \r\n  // 设置默认请求头\r\n  options.header = {\r\n    'Content-Type': 'application/json',\r\n    ...options.header\r\n  }\r\n  \r\n  return options\r\n}\r\n\r\n// 响应拦截器\r\nconst responseInterceptor = (response) => {\r\n  const { statusCode, data } = response\r\n  \r\n  // HTTP状态码处理\r\n  if (statusCode === 200) {\r\n    // 后端返回格式可能是: { code: 200, message: \"success\", data: {...}, error: null }\r\n    // 也可能是直接返回数据: { user: {...}, token: \"...\" }\r\n    if (data && typeof data === 'object') {\r\n      // 检查是否存在 code 字段\r\n      if ('code' in data) {\r\n        // 有 code 字段，按统一格式处理\r\n        if (data.code === 200) {\r\n          // 业务成功，返回完整响应对象（保持 code、message、data 结构）\r\n          // 这样前端可以统一检查 response.code === 200 和访问 response.data\r\n          return Promise.resolve(data)\r\n        } else {\r\n          // 业务错误，返回错误信息\r\n          const errorMsg = data.message || data.error || '请求失败'\r\n          return Promise.reject(new Error(errorMsg))\r\n        }\r\n      } else {\r\n        // 没有 code 字段，直接返回数据（兼容登录等直接返回数据的接口）\r\n        return Promise.resolve(data)\r\n      }\r\n    }\r\n    // 兼容直接返回数据的情况\r\n    return Promise.resolve(data)\r\n  } else if (statusCode === 400) {\r\n    // 400 错误，通常是业务错误\r\n    const errorMsg = data?.detail || data?.message || '请求参数错误'\r\n    return Promise.reject(new Error(errorMsg))\r\n  } else if (statusCode === 401) {\r\n    // 未授权，清除Token并跳转登录\r\n    uni.removeStorageSync(config.TOKEN_KEY)\r\n    uni.removeStorageSync(config.USER_INFO_KEY)\r\n    uni.reLaunch({\r\n      url: '/pages/login/login'\r\n    })\r\n    return Promise.reject(new Error('登录已过期，请重新登录'))\r\n  } else if (statusCode === 403) {\r\n    // 禁止访问\r\n    return Promise.reject(new Error(data?.detail || '无权限访问'))\r\n  } else if (statusCode === 500) {\r\n    // 服务器错误\r\n    return Promise.reject(new Error(data?.detail || '服务器错误'))\r\n  } else {\r\n    return Promise.reject(new Error(data?.detail || `请求失败: ${statusCode}`))\r\n  }\r\n}\r\n\r\n// 通用请求方法\r\nconst request = (options) => {\r\n  return new Promise((resolve, reject) => {\r\n    // 请求拦截\r\n    const requestConfig = requestInterceptor({\r\n      url: BASE_URL + options.url,\r\n      method: options.method || 'GET',\r\n      data: options.data,\r\n      header: options.header || {},\r\n      timeout: options.timeout || config.TIMEOUT // 支持每个请求单独设置超时时间\r\n    })\r\n    \r\n    // 对于 POST/PUT/DELETE 请求，确保数据正确序列化\r\n    // uni.request 在 Content-Type 为 application/json 时会自动序列化，但我们需要确保数据格式正确\r\n    if (['POST', 'PUT', 'DELETE', 'PATCH'].includes(requestConfig.method.toUpperCase()) && requestConfig.data) {\r\n      // 确保 data 是对象格式，uni.request 会自动序列化为 JSON\r\n      if (typeof requestConfig.data === 'string') {\r\n        try {\r\n          requestConfig.data = JSON.parse(requestConfig.data)\r\n        } catch (e) {\r\n          // 如果已经是字符串且无法解析，保持原样\r\n        }\r\n      }\r\n    }\r\n    \r\n    // 添加调试日志\r\n    console.log('发送请求:', {\r\n      url: requestConfig.url,\r\n      method: requestConfig.method,\r\n      data: requestConfig.data,\r\n      header: requestConfig.header,\r\n      timeout: requestConfig.timeout\r\n    })\r\n    \r\n    uni.request({\r\n      url: requestConfig.url,\r\n      method: requestConfig.method,\r\n      data: requestConfig.data,\r\n      header: requestConfig.header,\r\n      timeout: requestConfig.timeout,\r\n      dataType: 'json',\r\n      success: (res) => {\r\n        console.log('请求成功:', {\r\n          statusCode: res.statusCode,\r\n          data: res.data\r\n        })\r\n        responseInterceptor(res)\r\n          .then(resolve)\r\n          .catch(reject)\r\n      },\r\n      fail: (err) => {\r\n        console.error('请求失败:', err)\r\n        console.error('请求配置:', {\r\n          url: requestConfig.url,\r\n          method: requestConfig.method,\r\n          timeout: requestConfig.timeout\r\n        })\r\n        let errorMsg = err.errMsg || '网络请求失败'\r\n        \r\n        // 提供更友好的错误提示\r\n        if (errorMsg.includes('timeout')) {\r\n          errorMsg = `请求超时（${requestConfig.timeout}ms），请检查：\\n1. 后端服务是否已启动（访问 http://localhost:8000/health 测试）\\n2. 后端服务是否正常运行\\n3. 数据库连接是否正常\\n4. 检查浏览器控制台是否有CORS错误`\r\n        } else if (errorMsg.includes('fail') || errorMsg.includes('connect')) {\r\n          errorMsg = `无法连接到服务器（${requestConfig.url}），请检查：\\n1. 后端服务是否已启动\\n2. 后端服务是否监听在正确的地址和端口\\n3. 防火墙是否阻止了连接\\n4. 检查浏览器控制台是否有CORS错误`\r\n        }\r\n        \r\n        reject(new Error(errorMsg))\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\n// API方法封装\r\nconst http = {\r\n  // 测试连接\r\n  testConnection: () => request({ \r\n    url: '/health', \r\n    method: 'GET',\r\n    timeout: 5000 // 健康检查5秒超时即可\r\n  }),\r\n  \r\n  // 认证相关\r\n  // 发送验证码：GET /auth/code?email=xxx\r\n  sendCode: (email) => request({ \r\n    url: `/auth/code?email=${encodeURIComponent(email)}`, \r\n    method: 'GET' \r\n  }),\r\n  \r\n  // 用户注册：POST /auth/register\r\n  register: (data) => request({ \r\n    url: '/auth/register', \r\n    method: 'POST', \r\n    data \r\n  }),\r\n  \r\n  // 用户登录：POST /auth/login\r\n  login: (data) => request({ \r\n    url: '/auth/login', \r\n    method: 'POST', \r\n    data,\r\n    timeout: 15000 // 登录接口15秒超时，给数据库查询等操作留出时间\r\n  }),\r\n  \r\n  logout: () => {\r\n    // 清除本地存储\r\n    uni.removeStorageSync(config.TOKEN_KEY)\r\n    uni.removeStorageSync(config.USER_INFO_KEY)\r\n    return Promise.resolve()\r\n  },\r\n  \r\n  // 工作台相关\r\n  createSession: () => request({ url: '/api/v1/workspace/create-session', method: 'POST', timeout: 10000 }),\r\n  sendMessage: (data) => request({ url: '/api/v1/workspace/send-message', method: 'POST', data, timeout: 120000 }), // LLM 生成需要更长时间\r\n  getSession: (sessionId) => request({ url: `/api/v1/workspace/session/${sessionId}`, method: 'GET', timeout: 10000 }),\r\n  regenerate: (data) => request({ url: '/api/v1/workspace/regenerate', method: 'POST', data, timeout: 120000 }), // LLM 生成需要更长时间\r\n  \r\n  // 历史记录相关\r\n  getConversations: (params) => {\r\n    // 将params对象转换为URL查询参数\r\n    const queryString = Object.keys(params || {})\r\n      .filter(key => params[key] !== undefined && params[key] !== null)\r\n      .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`)\r\n      .join('&')\r\n    return request({ \r\n      url: `/api/v1/history/conversations${queryString ? '?' + queryString : ''}`, \r\n      method: 'GET' \r\n    })\r\n  },\r\n  searchHistory: (params) => {\r\n    // 将params对象转换为URL查询参数\r\n    const queryString = Object.keys(params || {})\r\n      .filter(key => params[key] !== undefined && params[key] !== null)\r\n      .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`)\r\n      .join('&')\r\n    return request({ \r\n      url: `/api/v1/history/search${queryString ? '?' + queryString : ''}`, \r\n      method: 'GET' \r\n    })\r\n  },\r\n  deleteHistory: (data) => request({ \r\n    url: '/api/v1/history/delete', \r\n    method: 'DELETE', \r\n    data \r\n  }),\r\n  \r\n  // 内容管理相关\r\n  getContents: (params) => request({ url: '/contents/list', method: 'GET', data: params }),\r\n  searchContents: (params) => request({ url: '/contents/search', method: 'GET', data: params }),\r\n  \r\n  // 配图生成相关\r\n  generateImage: (data) => request({ url: '/image/generate', method: 'POST', data }),\r\n  batchGenerateImage: (data) => request({ url: '/image/batch-generate', method: 'POST', data }),\r\n  \r\n  // RAG知识库相关\r\n  // 上传文档：POST /api/v1/rag/upload (multipart/form-data)\r\n  uploadDocument: (filePath) => {\r\n    return new Promise((resolve, reject) => {\r\n      const token = uni.getStorageSync(config.TOKEN_KEY)\r\n      uni.uploadFile({\r\n        url: BASE_URL + '/api/v1/rag/upload',\r\n        filePath: filePath,\r\n        name: 'file',\r\n        header: {\r\n          'Authorization': token ? `Bearer ${token}` : ''\r\n        },\r\n        success: (res) => {\r\n          // 检查HTTP状态码\r\n          if (res.statusCode === 200) {\r\n            try {\r\n              const data = JSON.parse(res.data)\r\n              if (data.code === 200) {\r\n                resolve(data)\r\n              } else {\r\n                reject(new Error(data.message || data.detail || '上传失败'))\r\n              }\r\n            } catch (e) {\r\n              reject(new Error('响应解析失败'))\r\n            }\r\n          } else if (res.statusCode === 401) {\r\n            // 未授权，清除Token并跳转登录\r\n            uni.removeStorageSync(config.TOKEN_KEY)\r\n            uni.removeStorageSync(config.USER_INFO_KEY)\r\n            uni.reLaunch({\r\n              url: '/pages/login/login'\r\n            })\r\n            reject(new Error('登录已过期，请重新登录'))\r\n          } else {\r\n            // 其他HTTP错误\r\n            try {\r\n              const data = JSON.parse(res.data)\r\n              reject(new Error(data.detail || data.message || `上传失败: ${res.statusCode}`))\r\n            } catch (e) {\r\n              reject(new Error(`上传失败: ${res.statusCode}`))\r\n            }\r\n          }\r\n        },\r\n        fail: (err) => {\r\n          reject(new Error(err.errMsg || '上传失败'))\r\n        }\r\n      })\r\n    })\r\n  },\r\n  \r\n  // 删除文档：DELETE /api/v1/rag/delete (请求体包含 document_id)\r\n  deleteDocument: (documentId) => {\r\n    return request({ \r\n      url: '/api/v1/rag/delete', \r\n      method: 'DELETE',\r\n      data: {\r\n        document_id: documentId\r\n      }\r\n    })\r\n  },\r\n  \r\n  // 文档列表：GET /api/v1/rag/list?page=1&page_size=20\r\n  getDocuments: (params) => {\r\n    const queryString = Object.keys(params || {})\r\n      .filter(key => params[key] !== undefined && params[key] !== null)\r\n      .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`)\r\n      .join('&')\r\n    return request({ \r\n      url: `/api/v1/rag/list${queryString ? '?' + queryString : ''}`, \r\n      method: 'GET' \r\n    })\r\n  },\r\n  \r\n  // 语义检索：POST /api/v1/rag/search\r\n  searchRAG: (data) => request({ \r\n    url: '/api/v1/rag/search', \r\n    method: 'POST', \r\n    data \r\n  })\r\n}\r\n\r\nexport default http\r\n\r\n"],"names":["config","uni"],"mappings":"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"}